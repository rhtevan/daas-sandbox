schema_version: 1

name: quay.io/kiegroup/daas-executor-ubi8
from: 'registry.access.redhat.com/ubi8/ubi-minimal:8.0'
version: '0.1'
description: KIE DaaS Executor

labels:
  - name: io.k8s.display-name
    value: KIE DaaS Executor
  - name: io.k8s.description
    value: KIE DaaS Executor
  - name: io.openshift.tags
    value: 'daas,executor'

packages:
  manager: microdnf

modules:
  repositories:
    - path: modules
    - git:
        url: 'https://github.com/jboss-openshift/cct_module'
        ref: 0.41.0
  install:
    - name: org.kie.daas.common.modules
    - name: org.kie.daas.java.openjdk
      version: 11-devel
    - name: org.kie.daas.java.maven
      version: 3.6.x
    - name: org.kie.daas.java.jboss
    - name: dynamic-resources
    - name: org.kie.daas.component.executor
    - name: org.kie.daas.common.cleanup

run:
  workdir: /home/daas
  user: 1001
  cmd:
    - /home/daas/launch/launch-executor.sh
